{% extends 'base_app.html' %} 
{% block 'body' %}
<div>
    <p class="heading-1">Accounts List</p>
    <p class="heading-2">{{ company.name }}</p>
</div>

<div id="new-account-form-container" class="mt-3">
    <button class="btn btn-primary" id="open-new-account-form-btn">
        <i class="fas fa-plus-square"></i>
        New Account
    </button>
    <div id="new-company-form" style="display:none" class="card mt-4 mb-3 p-3">
        <p class="heading-2">Create a New Account</p>
        <div
            id="new-company-form-errors"
            class="mt-2 mb-2 p-2 alert alert-danger"
            style="display:none"
        >
        </div>
        <div class="mt-3">
            <button class="btn btn-success" id="save-new-account-btn">
                <i class="fas fa-save"></i> Save
            </button>
        </div>
    </div>
</div>

<div id="accounts-list" class="mt-3">
    <div class="alert alert-info" id="no-accounts-yet-msg" style="display:none;">
        You don't have any accounts for this company yet.
        <div class="mt-3">
            <button 
                class="btn btn-primary"
                onclick="window.location='/app/company/{{ company.slug }}/default-account/'"
            >
                <i class="fas fa-bolt"></i>
                Add Default Accounts
            </button>
        </div>
        <div class="mt-3">
            <button class="btn btn-primary">
                <i class="fas fa-bolt"></i>
                Import Accounts
            </button>
        </div>
    </div>
</div>
<script>
$(document).ready(()=>{
    const url = "{% url 'account-list' %}?company={{ company.slug }}"
    $.get(url, (accounts, status, xhr)=>{
        if (xhr.status != 200) {
            return alert("An Error Occured. " + status)
        }
        if (accounts.length == 0) {
            $("#no-accounts-yet-msg").css("display", "block")
            return
        }
    })
})
</script>
{% endblock %}
